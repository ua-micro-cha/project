
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Raw notes dump">
      
      
        <meta name="author" content="Aparicio">
      
      
        <link rel="canonical" href="https://ua-micro-cha/github.io/project/240720/">
      
      
        <link rel="prev" href="../240726/">
      
      
        <link rel="next" href="../240712/">
      
      
      <link rel="icon" href="../images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.20">
    
    
      
        <title>Update - UA Micro Cha Project</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#20-july-2024" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="UA Micro Cha Project" class="md-header__button md-logo" aria-label="UA Micro Cha Project" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UA Micro Cha Project
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Update
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ua-micro-cha/project" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    project
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="UA Micro Cha Project" class="md-nav__button md-logo" aria-label="UA Micro Cha Project" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>

    </a>
    UA Micro Cha Project
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ua-micro-cha/project" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    project
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fruit Surface and Soil Microbiome Project
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    15 August 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            15 August 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../240815a.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    26 July 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            26 July 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../240726/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    20 July 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            20 July 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Update
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humann-container-build-attempt" class="md-nav__link">
    <span class="md-ellipsis">
      humann container build attempt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="humann container build attempt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitionrecipe-file-draft" class="md-nav__link">
    <span class="md-ellipsis">
      definition/recipe file draft
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#could-not-resolve-permission-errors" class="md-nav__link">
    <span class="md-ellipsis">
      could not resolve permission errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hpc-workshops-and-training-materials" class="md-nav__link">
    <span class="md-ellipsis">
      HPC Workshops and Training Materials
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimizing-lightweight-file-processing-for-high-performance-computing" class="md-nav__link">
    <span class="md-ellipsis">
      Optimizing Lightweight File Processing for High-Performance Computing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge-forward-and-reverse-reads-for-humann-entry-with-fastp" class="md-nav__link">
    <span class="md-ellipsis">
      merge forward and reverse reads for humann entry with fastp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="merge forward and reverse reads for humann entry with fastp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fastp_mergeslurm-script" class="md-nav__link">
    <span class="md-ellipsis">
      fastp_merge.slurm script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fastp_memorypy-script" class="md-nav__link">
    <span class="md-ellipsis">
      fastp_memory.py script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimized-metaspades-by-each-sample" class="md-nav__link">
    <span class="md-ellipsis">
      optimized metaspades - by each sample
    </span>
  </a>
  
    <nav class="md-nav" aria-label="optimized metaspades - by each sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apple315_spadeslurm-script" class="md-nav__link">
    <span class="md-ellipsis">
      apple315_spade.slurm script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple315_spadepy-script" class="md-nav__link">
    <span class="md-ellipsis">
      apple315_spade.py script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humann-python-virtual-environment-install-attempt" class="md-nav__link">
    <span class="md-ellipsis">
      humann python virtual environment install attempt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="humann python virtual environment install attempt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-log" class="md-nav__link">
    <span class="md-ellipsis">
      install log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-script-attempt-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm script - attempt 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-py-script-attempt-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 .py script - attempt 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-job-log-error-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm job log - error 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-attempt-1-replace-py-code-section" class="md-nav__link">
    <span class="md-ellipsis">
      debug attempt 1 - replace .py code section:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-job-log-error-2" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm job log - error 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mamba-reinstall" class="md-nav__link">
    <span class="md-ellipsis">
      mamba reinstall
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    12 July 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            12 July 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../240712/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Jupyter Notebooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Jupyter Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/abricate_install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Abricate Install Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/abricate_run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Abricate Run Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    28 June 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            28 June 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../240628/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    10 May 2024
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            10 May 2024
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../240510/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Update
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_2" >
        
          
          <label class="md-nav__link" for="__nav_7_2" id="__nav_7_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Jupyter Notebooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_2">
            <span class="md-nav__icon md-icon"></span>
            Jupyter Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/apple_assembly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Apple metaSPAdes Assembly Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/orange_assembly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Orange metaSPAdes Assembly Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/peach_assembly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Peach metaSPAdes Assembly Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../assets/tree_fruit_kraken-biom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tree Fruit kraken-biom Jupyter Notebook
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../240426/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26 April 2024
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#humann-container-build-attempt" class="md-nav__link">
    <span class="md-ellipsis">
      humann container build attempt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="humann container build attempt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#definitionrecipe-file-draft" class="md-nav__link">
    <span class="md-ellipsis">
      definition/recipe file draft
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#could-not-resolve-permission-errors" class="md-nav__link">
    <span class="md-ellipsis">
      could not resolve permission errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hpc-workshops-and-training-materials" class="md-nav__link">
    <span class="md-ellipsis">
      HPC Workshops and Training Materials
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimizing-lightweight-file-processing-for-high-performance-computing" class="md-nav__link">
    <span class="md-ellipsis">
      Optimizing Lightweight File Processing for High-Performance Computing
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#merge-forward-and-reverse-reads-for-humann-entry-with-fastp" class="md-nav__link">
    <span class="md-ellipsis">
      merge forward and reverse reads for humann entry with fastp
    </span>
  </a>
  
    <nav class="md-nav" aria-label="merge forward and reverse reads for humann entry with fastp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fastp_mergeslurm-script" class="md-nav__link">
    <span class="md-ellipsis">
      fastp_merge.slurm script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fastp_memorypy-script" class="md-nav__link">
    <span class="md-ellipsis">
      fastp_memory.py script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optimized-metaspades-by-each-sample" class="md-nav__link">
    <span class="md-ellipsis">
      optimized metaspades - by each sample
    </span>
  </a>
  
    <nav class="md-nav" aria-label="optimized metaspades - by each sample">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#apple315_spadeslurm-script" class="md-nav__link">
    <span class="md-ellipsis">
      apple315_spade.slurm script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#apple315_spadepy-script" class="md-nav__link">
    <span class="md-ellipsis">
      apple315_spade.py script
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#humann-python-virtual-environment-install-attempt" class="md-nav__link">
    <span class="md-ellipsis">
      humann python virtual environment install attempt
    </span>
  </a>
  
    <nav class="md-nav" aria-label="humann python virtual environment install attempt">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-log" class="md-nav__link">
    <span class="md-ellipsis">
      install log
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-script-attempt-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm script - attempt 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-py-script-attempt-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 .py script - attempt 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-job-log-error-1" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm job log - error 1
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-attempt-1-replace-py-code-section" class="md-nav__link">
    <span class="md-ellipsis">
      debug attempt 1 - replace .py code section:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#humann-step-1-slurm-job-log-error-2" class="md-nav__link">
    <span class="md-ellipsis">
      humann step 1 slurm job log - error 2
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mamba-reinstall" class="md-nav__link">
    <span class="md-ellipsis">
      mamba reinstall
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="20-july-2024">20 July 2024<a class="headerlink" href="#20-july-2024" title="Permanent link">&para;</a></h1>
<h2 id="humann-container-build-attempt">humann container build attempt<a class="headerlink" href="#humann-container-build-attempt" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><a href="https://apptainer.org/docs/user/main/docker_and_oci.html" target="_blank">Support for Docker and OCI Containers</a></p>
</li>
<li>
<p><a href="https://hub.docker.com/r/biobakery/humann" target="_blank">biobakery/humann</a></p>
</li>
<li>
<p><a href="https://hpcdocs.hpc.arizona.edu/events/workshop_materials/intro_to_containers/" target="_blank">Intro to Containers on HPC</a></p>
</li>
</ul>
<h3 id="definitionrecipe-file-draft">definition/recipe file draft<a class="headerlink" href="#definitionrecipe-file-draft" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>Bootstrap: docker
From: ubuntu:18.04

%post
    # Update and install necessary packages
    apt-get update &amp;&amp; apt-get install -y \
    python3 \
    python3-pip \
    bowtie2 \
    diamond \
    wget

    # Set installation directory
    export INSTALL_DIR=/xdisk/pi/member/tree-fruit/09humann

    # Install HUMAnN
    pip3 install humann

    # Download HUMAnN databases
    mkdir -p $INSTALL_DIR/databases
    humann_databases --download chocophlan full $INSTALL_DIR/databases
    humann_databases --download uniref uniref90_diamond $INSTALL_DIR/databases

    # Configure HUMAnN to use downloaded databases
    humann_config --update database_folders nucleotide $INSTALL_DIR/databases/chocophlan
    humann_config --update database_folders protein $INSTALL_DIR/databases/uniref

    # Clean up temporary files without attempting to remove system-protected directories
    apt-get clean
    rm -rf /var/lib/apt/lists/* /tmp/* || true
    rm -rf /var/tmp/* || true

%runscript
    # Default command to run HUMAnN
    echo &quot;HUMAnN container is set up. Please provide input and output directories to run.&quot;

%environment
    # Set environment variables
    export INSTALL_DIR=/xdisk/pi/member/tree-fruit/09humann
    export PATH=$INSTALL_DIR/bin:$PATH

%labels
    MAINTAINER Name &lt;email@example.com&gt;
    DESCRIPTION &quot;Container for HUMAnN bioinformatics tool&quot;

%test
    # Run tests to ensure the installation works
    humann_test
</code></pre></div>
<h3 id="could-not-resolve-permission-errors">could not resolve permission errors<a class="headerlink" href="#could-not-resolve-permission-errors" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>rm: cannot remove &#39;/tmp/worker-63272-93100/trash&#39;: Permission denied
rm: cannot remove &#39;/tmp/worker-63272-93118/trash&#39;: Permission denied
rm: cannot remove &#39;/var/tmp/systemd-private-32e7500eecef4f8e982467c1423d89a9-chronyd.service-kP5gSi&#39;: Operation not permitted
rm: cannot remove &#39;/var/tmp/systemd-private-32e7500eecef4f8e982467c1423d89a9-rtkit-daemon.service-oIeghW&#39;: Operation not permitted
FATAL:   While performing build: while running engine: exit status 1
</code></pre></div>
<hr />
<h2 id="hpc-workshops-and-training-materials">HPC Workshops and Training Materials<a class="headerlink" href="#hpc-workshops-and-training-materials" title="Permanent link">&para;</a></h2>
<p>https://hpcdocs.hpc.arizona.edu/events/workshop_materials/</p>
<hr />
<h2 id="optimizing-lightweight-file-processing-for-high-performance-computing">Optimizing Lightweight File Processing for High-Performance Computing<a class="headerlink" href="#optimizing-lightweight-file-processing-for-high-performance-computing" title="Permanent link">&para;</a></h2>
<p><strong>Objective</strong>: Process files expeditiously in a lightweight environment while fully maintaining data integrity.</p>
<p><strong>Keywords</strong>: Optimization, Efficiency, Memory</p>
<p><strong>Possible Code Techniques</strong>:
- List Comprehensions
- Generator Expressions
- Tuple Unpacking
- Merge Dictionaries using Dictionary Unpacking
- <code>__slots__</code>
- <code>__str__</code> and <code>__repr__</code>
- <code>functools.lru_cache</code>
- <code>zip</code>
- <code>collections.ChainMap</code>
- <code>sys.exit()</code>
- <code>deque</code>
- <code>mmap</code>
- <code>array</code>
- f-Strings
- <code>if x in list</code>
- <code>str.join()</code>
- <code>str.split()</code>
- <code>set()</code>
- Walrus Operator (<code>:=</code>)
- Transforming Lists into a Dictionary
- List Slicing
- Garbage Collection Tuning
- Leverage Local Variable Scope
- Share Large Objects
- Cache and Reuse Objects
- <code>itertools</code></p>
<hr />
<h2 id="merge-forward-and-reverse-reads-for-humann-entry-with-fastp">merge forward and reverse reads for humann entry with fastp<a class="headerlink" href="#merge-forward-and-reverse-reads-for-humann-entry-with-fastp" title="Permanent link">&para;</a></h2>
<p><a href="https://github.com/OpenGene/fastp/" target="_blank">fastp</a></p>
<ul>
<li>
<p>Open the directory containing slurm and .py scripts in the terminal.</p>
</li>
<li>
<p>Rid hidden and unexpected characters from files:</p>
</li>
</ul>
<p>'sed -i 's/\r$//' fastp_merge.slurm'</p>
<p>'sed -i 's/\r$//' fastp_memory.py'</p>
<ul>
<li>Submit the script using the <code>sbatch</code> command:
'sbatch fastp_merge.slurm'</li>
</ul>
<h3 id="fastp_mergeslurm-script">fastp_merge.slurm script<a class="headerlink" href="#fastp_mergeslurm-script" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="kp">#SBATCH --job-name=fastp_merge</span>
<span class="kp">#SBATCH --account=kcooper</span>
<span class="kp">#SBATCH --partition=standard</span>
<span class="kp">#SBATCH --nodes=1</span>
<span class="kp">#SBATCH --ntasks=1</span>
<span class="kp">#SBATCH --cpus-per-task=35</span>
<span class="kp">#SBATCH --time=18:00:00</span>
<span class="kp">#SBATCH --mem-per-cpu=5gb</span>
<span class="kp">#SBATCH --mail-type=ALL</span>

<span class="c1"># Load the Python module</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Loading Python module&quot;</span>
module<span class="w"> </span>load<span class="w"> </span>python/3.8

<span class="c1"># Directory containing the files</span>
<span class="nv">directory</span><span class="o">=</span><span class="s1">&#39;/xdisk/kcooper/caparicio/tree-fruit/01d_fastp_reads_all&#39;</span>
<span class="nv">output_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">directory</span><span class="si">}</span><span class="s2">/output&quot;</span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output_dir</span><span class="si">}</span><span class="s2">&quot;</span>

<span class="c1"># Run Python script with the necessary module</span>
python3<span class="w"> </span>fastp_memory.py<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">directory</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output_dir</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="fastp_memorypy-script">fastp_memory.py script<a class="headerlink" href="#fastp_memorypy-script" title="Permanent link">&para;</a></h3>
<ul>
<li>make .py script executable</li>
</ul>
<p>'dir="/xdisk/kcooper/caparicio/tree-fruit/01d_fastp_reads_all/"'</p>
<p>'chmod +x "$dir"/*.py'</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">concurrent.futures</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># Generator to yield pairs of files</span>
<span class="k">def</span> <span class="nf">generate_file_pairs</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
    <span class="n">files_1</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s2">&quot;*_1.trimmed.fastq&quot;</span><span class="p">)))</span>
    <span class="n">files_2</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="s2">&quot;*_2.trimmed.fastq&quot;</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">file_1</span><span class="p">,</span> <span class="n">file_2</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">files_1</span><span class="p">,</span> <span class="n">files_2</span><span class="p">):</span>
        <span class="k">yield</span> <span class="p">(</span><span class="n">file_1</span><span class="p">,</span> <span class="n">file_2</span><span class="p">)</span>

<span class="c1"># Function to merge two files using fastp</span>
<span class="k">def</span> <span class="nf">merge_files</span><span class="p">(</span><span class="n">file_pair</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">):</span>
    <span class="n">file_1</span><span class="p">,</span> <span class="n">file_2</span> <span class="o">=</span> <span class="n">file_pair</span>
    <span class="n">output_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output_dir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">file_1</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_1.trimmed.fastq&quot;</span><span class="p">,</span> <span class="s2">&quot;.merged.fastq&quot;</span><span class="p">))</span>
    <span class="n">log_file</span> <span class="o">=</span> <span class="n">output_file</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.merged.fastq&quot;</span><span class="p">,</span> <span class="s2">&quot;.log&quot;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;apptainer&quot;</span><span class="p">,</span> <span class="s2">&quot;exec&quot;</span><span class="p">,</span> <span class="s2">&quot;https://depot.galaxyproject.org/singularity/fastp:0.23.3--h5f740d0_0&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fastp&quot;</span><span class="p">,</span> <span class="s2">&quot;-i&quot;</span><span class="p">,</span> <span class="n">file_1</span><span class="p">,</span> <span class="s2">&quot;-I&quot;</span><span class="p">,</span> <span class="n">file_2</span><span class="p">,</span> <span class="s2">&quot;-o&quot;</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span>
    <span class="p">]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">log_file</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">log</span><span class="p">:</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">stdout</span><span class="o">=</span><span class="n">log</span><span class="p">,</span> <span class="n">stderr</span><span class="o">=</span><span class="n">log</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">):</span>
    <span class="n">file_pairs</span> <span class="o">=</span> <span class="n">generate_file_pairs</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
        <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">merge_files</span><span class="p">,</span> <span class="n">pair</span><span class="p">,</span> <span class="n">output_dir</span><span class="p">)</span> <span class="k">for</span> <span class="n">pair</span> <span class="ow">in</span> <span class="n">file_pairs</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">concurrent</span><span class="o">.</span><span class="n">futures</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">futures</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error merging files: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">3</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Usage: python3 fastp_memory.py &lt;input_directory&gt; &lt;output_directory&gt;&quot;</span><span class="p">)</span>
        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">input_directory</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">output_directory</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
    <span class="n">main</span><span class="p">(</span><span class="n">input_directory</span><span class="p">,</span> <span class="n">output_directory</span><span class="p">)</span>
</code></pre></div>
<hr />
<h2 id="optimized-metaspades-by-each-sample">optimized metaspades - by each sample<a class="headerlink" href="#optimized-metaspades-by-each-sample" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p>Open the directory containing slurm and .py scripts in the terminal.</p>
</li>
<li>
<p>Rid hidden and unexpected characters from files:</p>
</li>
</ul>
<p>'sed -i 's/\r$//' apple315_spade.slurm'</p>
<p>'sed -i 's/\r$//' apple315_spade.py'</p>
<ul>
<li>Submit the script using the <code>sbatch</code> command:
'sbatch apple315_spade.slurm'</li>
</ul>
<h3 id="apple315_spadeslurm-script">apple315_spade.slurm script<a class="headerlink" href="#apple315_spadeslurm-script" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="kp">#SBATCH --job-name=apple315_assembly</span>
<span class="kp">#SBATCH --account=kcooper</span>
<span class="kp">#SBATCH --partition=standard</span>
<span class="kp">#SBATCH --nodes=1</span>
<span class="kp">#SBATCH --ntasks=1</span>
<span class="kp">#SBATCH --cpus-per-task=38</span>
<span class="kp">#SBATCH --time=48:00:00</span>
<span class="kp">#SBATCH --mem-per-cpu=5gb    </span>
<span class="kp">#SBATCH --mail-type=ALL</span>

module<span class="w"> </span>load<span class="w"> </span>spades
module<span class="w"> </span>load<span class="w"> </span>python/3.8

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Loading Python module&quot;</span>
<span class="nb">cd</span><span class="w"> </span>/xdisk/kcooper/caparicio/tree-fruit/

<span class="c1"># Run Python script with the necessary module</span>
python3<span class="w"> </span>/xdisk/kcooper/caparicio/tree-fruit/02batch/apple315_spade.py

<span class="nv">NUM_THREADS</span><span class="o">=</span><span class="m">38</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OMP_NUM_THREADS</span><span class="o">=</span><span class="nv">$NUM_THREADS</span>

<span class="c1"># Specify the files directly for apples315</span>
<span class="nv">f1</span><span class="o">=</span><span class="s2">&quot;01c_fastp_reads/apples315_1.trimmed.fastq&quot;</span>
<span class="nv">f2</span><span class="o">=</span><span class="s2">&quot;01c_fastp_reads/apples315_2.trimmed.fastq&quot;</span>
<span class="nv">sample_name</span><span class="o">=</span><span class="s2">&quot;apples315&quot;</span>
<span class="nv">output_dir</span><span class="o">=</span><span class="s2">&quot;02_assembly/</span><span class="si">${</span><span class="nv">sample_name</span><span class="si">}</span><span class="s2">&quot;</span>

mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_dir</span><span class="s2">&quot;</span>
<span class="nv">temp_dir</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$output_dir</span><span class="s2">/tmp&quot;</span><span class="w"> </span>
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$temp_dir</span><span class="s2">&quot;</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>-f<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">output_dir</span><span class="si">}</span><span class="s2">/spades.log&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Resuming SPAdes assembly for </span><span class="nv">$sample_name</span><span class="s2">&quot;</span>
<span class="w">    </span>spades.py<span class="w"> </span>--continue<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_dir</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Starting new SPAdes assembly for </span><span class="nv">$sample_name</span><span class="s2">&quot;</span>
<span class="w">    </span>spades.py<span class="w"> </span>--meta<span class="w"> </span>-k<span class="w"> </span><span class="m">21</span>,33,55,77<span class="w"> </span>-o<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$output_dir</span><span class="s2">&quot;</span><span class="w"> </span>--tmp-dir<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$temp_dir</span><span class="s2">&quot;</span><span class="w"> </span>-1<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$f1</span><span class="s2">&quot;</span><span class="w"> </span>-2<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$f2</span><span class="s2">&quot;</span><span class="w"> </span>--threads<span class="w"> </span><span class="nv">$NUM_THREADS</span>
<span class="k">fi</span>

<span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$?</span><span class="w"> </span>-eq<span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Assembly completed successfully for </span><span class="nv">$sample_name</span><span class="s2">. Removing temporary files.&quot;</span>
<span class="w">    </span>rm<span class="w"> </span>-rf<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$temp_dir</span><span class="s2">&quot;</span>
<span class="k">else</span>
<span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Assembly incomplete or failed for </span><span class="nv">$sample_name</span><span class="s2">. Retaining files for troubleshooting.&quot;</span>
<span class="k">fi</span>
</code></pre></div>
<h3 id="apple315_spadepy-script">apple315_spade.py script<a class="headerlink" href="#apple315_spadepy-script" title="Permanent link">&para;</a></h3>
<ul>
<li>make .py script executable</li>
</ul>
<p>'dir="/xdisk/kcooper/caparicio/tree-fruit/02batch/"'</p>
<p>'chmod +x "$dir"/*.py'</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">lru_cache</span>
<span class="kn">import</span> <span class="nn">mmap</span>

<span class="nd">@lru_cache</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">process_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="c1"># Memory-map the file, size 0 means whole file</span>
        <span class="n">mmapped_file</span> <span class="o">=</span> <span class="n">mmap</span><span class="o">.</span><span class="n">mmap</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">access</span><span class="o">=</span><span class="n">mmap</span><span class="o">.</span><span class="n">ACCESS_READ</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span><span class="n">mmapped_file</span><span class="o">.</span><span class="n">readline</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
            <span class="c1"># Process each line</span>
            <span class="k">pass</span>
        <span class="n">mmapped_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;01c_fastp_reads/apples315_1.trimmed.fastq&quot;</span><span class="p">,</span> <span class="s2">&quot;01c_fastp_reads/apples315_2.trimmed.fastq&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">process_file</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</code></pre></div>
<hr />
<h2 id="humann-python-virtual-environment-install-attempt">humann python virtual environment install attempt<a class="headerlink" href="#humann-python-virtual-environment-install-attempt" title="Permanent link">&para;</a></h2>
<ul>
<li>
<p><a href="https://hpcdocs.hpc.arizona.edu/software/popular_software/python/" target="_blank">Installing Python Packages Using a Virtual Environment
</a></p>
</li>
<li>
<p><a href="https://github.com/biobakery/humann" target="_blank">humann</a></p>
</li>
<li>
<p><a href="https://ua-researchcomputing-hpc.github.io/Python-Examples/Using-Virtualenv/" target="_blank">Using Virtual Environments Overview</a></p>
</li>
</ul>
<h3 id="install-log">install log<a class="headerlink" href="#install-log" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>[caparicio@r4u13n1 ~]$ module load python/3.8
[caparicio@r4u13n1 ~]$ python3.8 -m venv /xdisk/kcooper/caparicio/virtual/humann38
[caparicio@r4u13n1 ~]$ source /xdisk/kcooper/caparicio/virtual/humann38/bin/activate
(humann38) [caparicio@r4u13n1 ~]$ pip install --upgrade pip
Requirement already satisfied: pip in /xdisk/kcooper/caparicio/virtual/humann38/lib/python3.8/site-packages (21.1.1)
Collecting pip
  Using cached pip-24.1.2-py3-none-any.whl (1.8 MB)
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip 21.1.1
    Uninstalling pip-21.1.1:
      Successfully uninstalled pip-21.1.1
Successfully installed pip-24.1.2
(humann38) [caparicio@r4u13n1 ~]$ pip install humann
Collecting humann
  Using cached humann-3.9.tar.gz (107.2 MB)
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... done
Building wheels for collected packages: humann
  Building wheel for humann (pyproject.toml) ... done
  Created wheel for humann: filename=humann-3.9-py3-none-any.whl size=105429071 sha256=083f25820038aa708de5ddbd588e67a8fb7692a7a21aaa9e3784976a6f24ec42
  Stored in directory: /home/u19/caparicio/.cache/pip/wheels/ba/0a/92/77b6b96fe7eb06c2e6dff0906d93fdfa0a347f780066c8e714
Successfully built humann
Installing collected packages: humann
Successfully installed humann-3.9


(humann) [caparicio@r4u13n1 ~]$ humann_databases --download chocophlan full /xdisk/kcooper/caparicio/tree-fruit/09humann
Creating subdirectory to install database: /xdisk/kcooper/caparicio/tree-fruit/09humann/chocophlan
Download URL: http://huttenhower.sph.harvard.edu/humann_data/chocophlan/full_chocophlan.v201901_v31.tar.gz
15.37 GB         
Extracting: /xdisk/kcooper/caparicio/tree-fruit/09humann/full_chocophlan.v201901_v31.tar.gz

Database installed: /xdisk/kcooper/caparicio/tree-fruit/09humann/chocophlan

HUMAnN configuration file updated: database_folders : nucleotide = /xdisk/kcooper/caparicio/tree-fruit/09humann/chocophlan
(humann) [caparicio@r4u13n1 ~]$ humann_databases --download uniref uniref90_diamond /xdisk/kcooper/caparicio/tree-fruit/09humann
Creating subdirectory to install database: /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref
Download URL: http://huttenhower.sph.harvard.edu/humann_data/uniprot/uniref_annotated/uniref90_annotated_v201901b_full.tar.gz
19.17 GB         
Extracting: /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref90_annotated_v201901b_full.tar.gz

Database installed: /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref

HUMAnN configuration file updated: database_folders : protein = /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref
(humann) [caparicio@r4u13n1 ~]$ humann_databases --download uniref uniref50_diamond /xdisk/kcooper/caparicio/tree-fruit/09humann
Download URL: http://huttenhower.sph.harvard.edu/humann_data/uniprot/uniref_annotated/uniref50_annotated_v201901b_full.tar.gz
6.43 GB         
Extracting: /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref50_annotated_v201901b_full.tar.gz

Database installed: /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref

HUMAnN configuration file updated: database_folders : protein = /xdisk/kcooper/caparicio/tree-fruit/09humann/uniref

(humann38) [caparicio@r4u10n2 ~]$ git clone https://github.com/biobakery/MetaPhlAn2.git
Cloning into &#39;MetaPhlAn2&#39;...
remote: Enumerating objects: 135, done.
remote: Counting objects: 100% (135/135), done.
remote: Compressing objects: 100% (114/114), done.
remote: Total 135 (delta 11), reused 127 (delta 7), pack-reused 0
Receiving objects: 100% (135/135), 33.39 MiB | 30.16 MiB/s, done.
Resolving deltas: 100% (11/11), done.

[caparicio@r4u10n2 ~]$ module load python/3.8
[caparicio@r4u10n2 ~]$ source /xdisk/kcooper/caparicio/virtual/humann38/bin/activate
(humann38) [caparicio@r4u10n2 ~]$ git clone https://github.com/biobakery/MetaPhlAn2.git
Cloning into &#39;MetaPhlAn2&#39;...
remote: Enumerating objects: 135, done.
remote: Counting objects: 100% (135/135), done.
remote: Compressing objects: 100% (114/114), done.
remote: Total 135 (delta 11), reused 127 (delta 7), pack-reused 0
Receiving objects: 100% (135/135), 33.39 MiB | 30.16 MiB/s, done.
Resolving deltas: 100% (11/11), done.
(humann38) [caparicio@r4u10n2 ~]$ metaphlan2 --version
-bash: metaphlan2: command not found
(humann38) [caparicio@r4u10n2 ~]$ cd /xdisk/kcooper/caparicio/virtual/humann38/bin
(humann38) [caparicio@r4u10n2 bin]$ pwd
/xdisk/kcooper/caparicio/virtual/humann38/bin
(humann38) [caparicio@r4u10n2 bin]$ git clone https://github.com/biobakery/MetaPhlAn2.git
Cloning into &#39;MetaPhlAn2&#39;...
remote: Enumerating objects: 135, done.
remote: Counting objects: 100% (135/135), done.
remote: Compressing objects: 100% (114/114), done.
remote: Total 135 (delta 11), reused 127 (delta 7), pack-reused 0
Receiving objects: 100% (135/135), 33.39 MiB | 32.26 MiB/s, done.
Resolving deltas: 100% (11/11), done.
(humann38) [caparicio@r4u10n2 bin]$ cd MetaPhlAn2
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ pip install .
ERROR: Directory &#39;.&#39; is not installable. Neither &#39;setup.py&#39; nor &#39;pyproject.toml&#39; found.
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ python setup.py install
python: can&#39;t open file &#39;setup.py&#39;: [Errno 2] No such file or directory
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ cmd
-bash: cmd: command not found
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ pwd
/xdisk/kcooper/caparicio/virtual/humann38/bin/MetaPhlAn2
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ $ export PATH=`pwd`:$PATH
-bash: $: command not found
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ export PATH=`pwd`:$PATH
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ export mpa_dir=`pwd`
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ metaphlan2.py --version
Error! numpy python library not detected!!
(humann38) [caparicio@r4u10n2 MetaPhlAn2]$ cd ..
(humann38) [caparicio@r4u10n2 bin]$ pwd
/xdisk/kcooper/caparicio/virtual/humann38/bin
(humann38) [caparicio@r4u10n2 bin]$ pip install numpy
Collecting numpy
  Downloading numpy-1.24.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (5.6 kB)
Downloading numpy-1.24.4-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (17.3 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 17.3/17.3 MB 40.1 MB/s eta 0:00:00
Installing collected packages: numpy
Successfully installed numpy-1.24.4
(humann38) [caparicio@r4u10n2 bin]$ metaphlan2.py --version
Warning! Biom python library not detected!
 Exporting to biom format will not work!
MetaPhlAn version 2.6.0 (19 August 2016)
(humann38) [caparicio@r4u10n2 bin]$ ^C
(humann38) [caparicio@r4u10n2 bin]$ pip install biom-format
Collecting biom-format
  Using cached biom_format-2.1.16-cp38-cp38-linux_x86_64.whl
Collecting click (from biom-format)
  Downloading click-8.1.7-py3-none-any.whl.metadata (3.0 kB)
Requirement already satisfied: numpy&gt;=1.9.2 in /xdisk/kcooper/caparicio/virtual/humann38/lib/python3.8/site-packages (from biom-format) (1.24.4)
Collecting scipy&gt;=1.3.1 (from biom-format)
  Downloading scipy-1.10.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (58 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 58.9/58.9 kB 1.2 MB/s eta 0:00:00
Collecting pandas&gt;=0.20.0 (from biom-format)
  Downloading pandas-2.0.3-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (18 kB)
Collecting h5py (from biom-format)
  Downloading h5py-3.11.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.5 kB)
Collecting python-dateutil&gt;=2.8.2 (from pandas&gt;=0.20.0-&gt;biom-format)
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting pytz&gt;=2020.1 (from pandas&gt;=0.20.0-&gt;biom-format)
  Downloading pytz-2024.1-py2.py3-none-any.whl.metadata (22 kB)
Collecting tzdata&gt;=2022.1 (from pandas&gt;=0.20.0-&gt;biom-format)
  Downloading tzdata-2024.1-py2.py3-none-any.whl.metadata (1.4 kB)
Collecting six&gt;=1.5 (from python-dateutil&gt;=2.8.2-&gt;pandas&gt;=0.20.0-&gt;biom-format)
  Using cached six-1.16.0-py2.py3-none-any.whl.metadata (1.8 kB)
Downloading pandas-2.0.3-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (12.4 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.4/12.4 MB 50.7 MB/s eta 0:00:00
Downloading scipy-1.10.1-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (34.5 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 34.5/34.5 MB 59.3 MB/s eta 0:00:00
Downloading click-8.1.7-py3-none-any.whl (97 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 97.9/97.9 kB 4.0 MB/s eta 0:00:00
Downloading h5py-3.11.0-cp38-cp38-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (5.3 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 5.3/5.3 MB 18.7 MB/s eta 0:00:00
Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Downloading pytz-2024.1-py2.py3-none-any.whl (505 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 505.5/505.5 kB 18.1 MB/s eta 0:00:00
Downloading tzdata-2024.1-py2.py3-none-any.whl (345 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 345.4/345.4 kB 15.4 MB/s eta 0:00:00
Using cached six-1.16.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: pytz, tzdata, six, scipy, h5py, click, python-dateutil, pandas, biom-format
Successfully installed biom-format-2.1.16 click-8.1.7 h5py-3.11.0 pandas-2.0.3 python-dateutil-2.9.0.post0 pytz-2024.1 scipy-1.10.1 six-1.16.0 tzdata-2024.1
(humann38) [caparicio@r4u10n2 bin]$ metaphlan2.py --version
MetaPhlAn version 2.6.0 (19 August 2016)
(humann38) [caparicio@r4u10n2 bin]$ python -c &quot;import numpy; print(numpy.__version__)&quot;
1.24.4
(humann38) [caparicio@r4u10n2 bin]$ python -c &quot;import biom; print(biom.__version__)&quot;
2.1.16
</code></pre></div>
<h3 id="humann-step-1-slurm-script-attempt-1">humann step 1 slurm script - attempt 1<a class="headerlink" href="#humann-step-1-slurm-script-attempt-1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>HUMANN_STEP1.SLURM
#!/bin/bash
#SBATCH --job-name=humann_step1
#SBATCH --account=pi
#SBATCH --partition=standard
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=35
#SBATCH --time=18:00:00
#SBATCH --mem-per-cpu=5gb
#SBATCH --mail-type=ALL

# Load the necessary modules
source /xdisk/pi/member/virtual/humann/bin/activate
module load python/3.8

# Set the directory containing the input files and the output directory
input_directory=&#39;/xdisk/pi/member/tree-fruit/01d_fastp_reads_all/output&#39;
output_directory=&#39;/xdisk/pi/member/tree-fruit/09humann/output&#39;
chocophlan_database=&#39;/xdisk/pi/member/tree-fruit/09humann/chocophlan&#39;

# Run the Python script
python3 humann_step1.py &quot;${input_directory}&quot; &quot;${output_directory}&quot; &quot;${chocophlan_database}&quot;
</code></pre></div>
<h3 id="humann-step-1-py-script-attempt-1">humann step 1 .py script - attempt 1<a class="headerlink" href="#humann-step-1-py-script-attempt-1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>#!/usr/bin/env python3

import os
import sys
import subprocess
from concurrent.futures import ThreadPoolExecutor

def generate_file_list(input_directory):
    &quot;&quot;&quot;Generate a list of .fastq files in the input directory.&quot;&quot;&quot;
    return [os.path.join(input_directory, file) for file in os.listdir(input_directory) if file.endswith(&#39;.fastq&#39;)]

def run_humann(sample, output_dir, chocophlan_database, uniref_database):
    &quot;&quot;&quot;Run HUMAnN for a given sample.&quot;&quot;&quot;
    output_sample_dir = os.path.join(output_dir, os.path.basename(sample).replace(&#39;.fastq&#39;, &#39;&#39;))
    os.makedirs(output_sample_dir, exist_ok=True)
    command = humann --input {sample} --output {output_sample_dir} --input_format fastq --nucleotide-database {chocophlan_database} --protein-database {uniref_database}&quot;
    subprocess.run(command, shell=True, check=True)

def main(input_directory, output_directory, chocophlan_database, uniref_database):
    samples = generate_file_list(input_directory)
    with ThreadPoolExecutor(max_workers=35) as executor:
        futures = [executor.submit(run_humann, sample, output_directory, chocophlan_database, uniref_database) for sample in samples]
        for future in futures:
            future.result()

if __name__ == &quot;__main__&quot;:
    if len(sys.argv) != 5:
        print(&quot;Usage: python humann_step1.py &lt;input_directory&gt; &lt;output_directory&gt; &lt;chocophlan_database&gt; &lt;uniref_database&gt;&quot;)
        sys.exit(1)
    input_directory = sys.argv[1]
    output_directory = sys.argv[2]
    chocophlan_database = sys.argv[3]
    uniref_database = sys.argv[4]
    main(input_directory, output_directory, chocophlan_database, uniref_database)
</code></pre></div>
<h3 id="humann-step-1-slurm-job-log-error-1">humann step 1 slurm job log - error 1<a class="headerlink" href="#humann-step-1-slurm-job-log-error-1" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>command = humann --input {sample} --output {output_sample_dir} --input_format fastq --nucleotide-database {chocophlan_database} --protein-database {uniref_database}&quot;
                             ^
SyntaxError: invalid syntax
</code></pre></div>
<h3 id="debug-attempt-1-replace-py-code-section">debug attempt 1 - replace .py code section:<a class="headerlink" href="#debug-attempt-1-replace-py-code-section" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code><span class="n">command</span> <span class="o">=</span> <span class="n">humann</span> <span class="o">--</span><span class="nb">input</span> <span class="p">{</span><span class="n">sample</span><span class="p">}</span> <span class="o">--</span><span class="n">output</span> <span class="p">{</span><span class="n">output_sample_dir</span><span class="p">}</span> <span class="o">--</span><span class="n">input_format</span> <span class="n">fastq</span> <span class="o">--</span><span class="n">nucleotide</span><span class="o">-</span><span class="n">database</span> <span class="p">{</span><span class="n">chocophlan_database</span><span class="p">}</span> <span class="o">--</span><span class="n">protein</span><span class="o">-</span><span class="n">database</span> <span class="p">{</span><span class="n">uniref_database</span><span class="p">}</span><span class="s2">&quot;</span>
</code></pre></div>
with:</p>
<div class="highlight"><pre><span></span><code><span class="n">command</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;humann --input </span><span class="si">{</span><span class="n">sample</span><span class="si">}</span><span class="s2"> --output </span><span class="si">{</span><span class="n">output_sample_dir</span><span class="si">}</span><span class="s2"> --input_format fastq --nucleotide-database </span><span class="si">{</span><span class="n">chocophlan_database</span><span class="si">}</span><span class="s2"> --protein-database </span><span class="si">{</span><span class="n">uniref_database</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="humann-step-1-slurm-job-log-error-2">humann step 1 slurm job log - error 2<a class="headerlink" href="#humann-step-1-slurm-job-log-error-2" title="Permanent link">&para;</a></h3>
<p><div class="highlight"><pre><span></span><code>/xdisk/pi/member/virtual/humann/bin/python: error while loading shared libraries: libpython3.11.so.1.0: cannot open shared object file: No such file or directory
Traceback (most recent call last):
  File &quot;humann_step1.py&quot;, line 41, in &lt;module&gt;
    main(input_directory, output_directory, chocophlan_database, uniref_database)
  File &quot;humann_step1.py&quot;, line 31, in main
    future.result()
  File &quot;/opt/ohpc/pub/apps/python/3.8.12/lib/python3.8/concurrent/futures/_base.py&quot;, line 444, in result
    return self.__get_result()
  File &quot;/opt/ohpc/pub/apps/python/3.8.12/lib/python3.8/concurrent/futures/_base.py&quot;, line 389, in __get_result
    raise self._exception
  File &quot;/opt/ohpc/pub/apps/python/3.8.12/lib/python3.8/concurrent/futures/thread.py&quot;, line 57, in run
    result = self.fn(*self.args, **self.kwargs)
  File &quot;humann_step1.py&quot;, line 24, in run_humann
    subprocess.run(command, shell=True, check=True)
  File &quot;/opt/ohpc/pub/apps/python/3.8.12/lib/python3.8/subprocess.py&quot;, line 516, in run
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command &#39;humann --input /xdisk/pi/member/tree-fruit/01d_fastp_reads_all/output/peaches273.merged.fastq --output /xdisk/pi/member/tree-fruit/09humann/output/peaches273.merged --input_format fastq --nucleotide-database /xdisk/pi/member/tree-fruit/09humann/chocophlan --protein-database /xdisk/pi/member/tree-fruit/09humann/uniref90&#39; returned non-zero exit status 127.
</code></pre></div>
numpy and metaphlan not found - after multiple tries to install both, DELETE INSTALL</p>
<hr />
<h2 id="mamba-reinstall">mamba reinstall<a class="headerlink" href="#mamba-reinstall" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://github.com/conda-forge/miniforge" target="_blank">miniforge</a></li>
<li>mamba mistakenly deleted in attempt to make room for installs in home drive</li>
<li>was directed to 'miniforge' when searching for 'mamba'
<div class="highlight"><pre><span></span><code>$ wget &quot;https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh&quot;
--2024-07-26 12:57:26--  https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-x86_64.sh
Resolving github.com (github.com)... 140.82.116.3
Connecting to github.com (github.com)|140.82.116.3|:443... connected.
HTTP request sent, awaiting response... 302 Found
Location: https://github.com/conda-forge/miniforge/releases/download/24.3.0-0/Miniforge3-Linux-x86_64.sh [following]
--2024-07-26 12:57:26--  https://github.com/conda-forge/miniforge/releases/download/24.3.0-0/Miniforge3-Linux-x86_64.sh
Reusing existing connection to github.com:443.
HTTP request sent, awaiting response... 302 Found
Location: https://objects.githubusercontent.com/github-production-release-asset-2e65be/221584272/44f31adc-7a87-4d05-8e42-82d599d5b648?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=releaseassetproduction%2F20240726%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20240726T195726Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c387f39dac2890e9cd087ad050c266ae2916634fba20ecdc50237beae023f3d1&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=221584272&amp;response-content-disposition=attachment%3B%20filename%3DMiniforge3-Linux-x86_64.sh&amp;response-content-type=application%2Foctet-stream [following]
--2024-07-26 12:57:27--  https://objects.githubusercontent.com/github-production-release-asset-2e65be/221584272/44f31adc-7a87-4d05-8e42-82d599d5b648?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=releaseassetproduction%2F20240726%2Fus-east-1%2Fs3%2Faws4_request&amp;X-Amz-Date=20240726T195726Z&amp;X-Amz-Expires=300&amp;X-Amz-Signature=c387f39dac2890e9cd087ad050c266ae2916634fba20ecdc50237beae023f3d1&amp;X-Amz-SignedHeaders=host&amp;actor_id=0&amp;key_id=0&amp;repo_id=221584272&amp;response-content-disposition=attachment%3B%20filename%3DMiniforge3-Linux-x86_64.sh&amp;response-content-type=application%2Foctet-stream
Resolving objects.githubusercontent.com (objects.githubusercontent.com)... 185.199.111.133, 185.199.108.133, 185.199.109.133, ...
Connecting to objects.githubusercontent.com (objects.githubusercontent.com)|185.199.111.133|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 82796318 (79M) [application/octet-stream]
Saving to: &#39;Miniforge3-Linux-x86_64.sh.1&#39;

100%[======================================&gt;] 82,796,318   105MB/s   in 0.8s   

2024-07-26 12:57:28 (105 MB/s) - &#39;Miniforge3-Linux-x86_64.sh.1&#39; saved [82796318/82796318]

[caparicio@r3u32n2 ~]$ bash Miniforge3-$(uname)-$(uname -m).sh

Welcome to Miniforge3 24.3.0-0

In order to continue the installation process, please review the license
agreement.
Please, press ENTER to continue
&gt;&gt;&gt; 
Miniforge installer code uses BSD-3-Clause license as stated below.

Binary packages that come with it have their own licensing terms
and by installing miniforge you agree to the licensing terms of individual
packages as well. They include different OSI-approved licenses including
the GNU General Public License and can be found in pkgs/&lt;pkg-name&gt;/info/licenses
folders.

Miniforge installer comes with a boostrapping executable that is used
when installing miniforge and is deleted after miniforge is installed.
The bootstrapping executable uses micromamba, cli11, cpp-filesystem,
curl, c-ares, krb5, libarchive, libev, lz4, nghttp2, openssl, libsolv,
nlohmann-json, reproc and zstd which are licensed under BSD-3-Clause,
MIT and OpenSSL licenses. Licenses and copyright notices of these
projects can be found at the following URL.
https://github.com/conda-forge/micromamba-feedstock/tree/master/recipe.

=============================================================================

Copyright (c) 2019-2022, conda-forge
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
list of conditions and the following disclaimer.

2. Redistributions in binary form must reproduce the above copyright notice,
this list of conditions and the following disclaimer in the documentation
and/or other materials provided with the distribution.

3. Neither the name of the copyright holder nor the names of its contributors
may be used to endorse or promote products derived from this software without
specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.


Do you accept the license terms? [yes|no]
&gt;&gt;&gt; 
Please answer &#39;yes&#39; or &#39;no&#39;:&#39;
&gt;&gt;&gt; yes

Miniforge3 will now be installed into this location:
/home/u19/caparicio/miniforge3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

[/home/u19/caparicio/miniforge3] &gt;&gt;&gt; 
PREFIX=/home/u19/caparicio/miniforge3
Unpacking payload ...
Extracting _libgcc_mutex-0.1-conda_forge.tar.bz2
Extracting ca-certificates-2024.2.2-hbcca054_0.conda
Extracting ld_impl_linux-64-2.40-h41732ed_0.conda
Extracting libstdcxx-ng-13.2.0-h7e041cc_5.conda
Extracting pybind11-abi-4-hd8ed1ab_3.tar.bz2
Extracting python_abi-3.10-4_cp310.conda
Extracting tzdata-2024a-h0c530f3_0.conda
Extracting libgomp-13.2.0-h807b86a_5.conda
Extracting _openmp_mutex-4.5-2_gnu.tar.bz2
Extracting libgcc-ng-13.2.0-h807b86a_5.conda
Extracting bzip2-1.0.8-hd590300_5.conda
Extracting c-ares-1.28.1-hd590300_0.conda
Extracting fmt-10.2.1-h00ab1b0_0.conda
Extracting icu-73.2-h59595ed_0.conda
Extracting keyutils-1.6.1-h166bdaf_0.tar.bz2
Extracting libev-4.33-hd590300_2.conda
Extracting libffi-3.4.2-h7f98852_5.tar.bz2
Extracting libiconv-1.17-hd590300_2.conda
Extracting libnsl-2.0.1-hd590300_0.conda
Extracting libuuid-2.38.1-h0b41bf4_0.conda
Extracting libxcrypt-4.4.36-hd590300_1.conda
Extracting libzlib-1.2.13-hd590300_5.conda
Extracting lz4-c-1.9.4-hcb278e6_0.conda
Extracting lzo-2.10-h516909a_1000.tar.bz2
Extracting ncurses-6.4.20240210-h59595ed_0.conda
Extracting openssl-3.2.1-hd590300_1.conda
Extracting reproc-14.2.4.post0-hd590300_1.conda
Extracting xz-5.2.6-h166bdaf_0.tar.bz2
Extracting yaml-cpp-0.8.0-h59595ed_0.conda
Extracting libedit-3.1.20191231-he28a2e2_2.tar.bz2
Extracting libnghttp2-1.58.0-h47da74e_1.conda
Extracting libsolv-0.7.28-hfc55251_2.conda
Extracting libsqlite-3.45.2-h2797004_0.conda
Extracting libssh2-1.11.0-h0841786_0.conda
Extracting libxml2-2.12.6-h232c23b_1.conda
Extracting readline-8.2-h8228510_1.conda
Extracting reproc-cpp-14.2.4.post0-h59595ed_1.conda
Extracting tk-8.6.13-noxft_h4845f30_101.conda
Extracting zstd-1.5.5-hfc55251_0.conda
Extracting krb5-1.21.2-h659d440_0.conda
Extracting libarchive-3.7.2-h2aa1ff5_1.conda
Extracting python-3.10.14-hd12c33a_0_cpython.conda
Extracting libcurl-8.7.1-hca28451_0.conda
Extracting menuinst-2.0.2-py310hff52083_0.conda
Extracting archspec-0.2.3-pyhd8ed1ab_0.conda
Extracting boltons-24.0.0-pyhd8ed1ab_0.conda
Extracting brotli-python-1.1.0-py310hc6cd4ac_1.conda
Extracting certifi-2024.2.2-pyhd8ed1ab_0.conda
Extracting charset-normalizer-3.3.2-pyhd8ed1ab_0.conda
Extracting colorama-0.4.6-pyhd8ed1ab_0.tar.bz2
Extracting distro-1.9.0-pyhd8ed1ab_0.conda
Extracting idna-3.6-pyhd8ed1ab_0.conda
Extracting jsonpointer-2.4-py310hff52083_3.conda
Extracting libmamba-1.5.8-had39da4_0.conda
Extracting packaging-24.0-pyhd8ed1ab_0.conda
Extracting platformdirs-4.2.0-pyhd8ed1ab_0.conda
Extracting pluggy-1.4.0-pyhd8ed1ab_0.conda
Extracting pycosat-0.6.6-py310h2372a71_0.conda
Extracting pycparser-2.22-pyhd8ed1ab_0.conda
Extracting pysocks-1.7.1-pyha2e5f31_6.tar.bz2
Extracting ruamel.yaml.clib-0.2.8-py310h2372a71_0.conda
Extracting setuptools-69.5.1-pyhd8ed1ab_0.conda
Extracting truststore-0.8.0-pyhd8ed1ab_0.conda
Extracting wheel-0.43.0-pyhd8ed1ab_1.conda
Extracting cffi-1.16.0-py310h2fee648_0.conda
Extracting jsonpatch-1.33-pyhd8ed1ab_0.conda
Extracting libmambapy-1.5.8-py310h39ff949_0.conda
Extracting pip-24.0-pyhd8ed1ab_0.conda
Extracting ruamel.yaml-0.18.6-py310h2372a71_0.conda
Extracting tqdm-4.66.2-pyhd8ed1ab_0.conda
Extracting urllib3-2.2.1-pyhd8ed1ab_0.conda
Extracting requests-2.31.0-pyhd8ed1ab_0.conda
Extracting zstandard-0.22.0-py310h1275a96_0.conda
Extracting conda-package-streaming-0.9.0-pyhd8ed1ab_0.conda
Extracting conda-package-handling-2.2.0-pyh38be061_0.conda
Extracting conda-24.3.0-py310hff52083_0.conda
Extracting conda-libmamba-solver-24.1.0-pyhd8ed1ab_0.conda
Extracting mamba-1.5.8-py310h51d5547_0.conda

Installing base environment...

Transaction

  Prefix: /home/u19/caparicio/miniforge3

  Updating specs:

   - conda-forge/linux-64::_libgcc_mutex==0.1=conda_forge[md5=d7c89558ba9fa0495403155b64376d81]
   - conda-forge/linux-64::ca-certificates==2024.2.2=hbcca054_0[md5=2f4327a1cbe7f022401b236e915a5fef]
   - conda-forge/linux-64::ld_impl_linux-64==2.40=h41732ed_0[md5=7aca3059a1729aa76c597603f10b0dd3]
   - conda-forge/linux-64::libstdcxx-ng==13.2.0=h7e041cc_5[md5=f6f6600d18a4047b54f803cf708b868a]
   - conda-forge/noarch::pybind11-abi==4=hd8ed1ab_3[md5=878f923dd6acc8aeb47a75da6c4098be]
   - conda-forge/linux-64::python_abi==3.10=4_cp310[md5=26322ec5d7712c3ded99dd656142b8ce]
   - conda-forge/noarch::tzdata==2024a=h0c530f3_0[md5=161081fc7cec0bfda0d86d7cb595f8d8]
   - conda-forge/linux-64::libgomp==13.2.0=h807b86a_5[md5=d211c42b9ce49aee3734fdc828731689]
   - conda-forge/linux-64::_openmp_mutex==4.5=2_gnu[md5=73aaf86a425cc6e73fcf236a5a46396d]
   - conda-forge/linux-64::libgcc-ng==13.2.0=h807b86a_5[md5=d4ff227c46917d3b4565302a2bbb276b]
   - conda-forge/linux-64::bzip2==1.0.8=hd590300_5[md5=69b8b6202a07720f448be700e300ccf4]
   - conda-forge/linux-64::c-ares==1.28.1=hd590300_0[md5=dcde58ff9a1f30b0037a2315d1846d1f]
   - conda-forge/linux-64::fmt==10.2.1=h00ab1b0_0[md5=35ef8bc24bd34074ebae3c943d551728]
   - conda-forge/linux-64::icu==73.2=h59595ed_0[md5=cc47e1facc155f91abd89b11e48e72ff]
   - conda-forge/linux-64::keyutils==1.6.1=h166bdaf_0[md5=30186d27e2c9fa62b45fb1476b7200e3]
   - conda-forge/linux-64::libev==4.33=hd590300_2[md5=172bf1cd1ff8629f2b1179945ed45055]
   - conda-forge/linux-64::libffi==3.4.2=h7f98852_5[md5=d645c6d2ac96843a2bfaccd2d62b3ac3]
   - conda-forge/linux-64::libiconv==1.17=hd590300_2[md5=d66573916ffcf376178462f1b61c941e]
   - conda-forge/linux-64::libnsl==2.0.1=hd590300_0[md5=30fd6e37fe21f86f4bd26d6ee73eeec7]
   - conda-forge/linux-64::libuuid==2.38.1=h0b41bf4_0[md5=40b61aab5c7ba9ff276c41cfffe6b80b]
   - conda-forge/linux-64::libxcrypt==4.4.36=hd590300_1[md5=5aa797f8787fe7a17d1b0821485b5adc]
   - conda-forge/linux-64::libzlib==1.2.13=hd590300_5[md5=f36c115f1ee199da648e0597ec2047ad]
   - conda-forge/linux-64::lz4-c==1.9.4=hcb278e6_0[md5=318b08df404f9c9be5712aaa5a6f0bb0]
   - conda-forge/linux-64::lzo==2.10=h516909a_1000[md5=bb14fcb13341b81d5eb386423b9d2bac]
   - conda-forge/linux-64::ncurses==6.4.20240210=h59595ed_0[md5=97da8860a0da5413c7c98a3b3838a645]
   - conda-forge/linux-64::openssl==3.2.1=hd590300_1[md5=9d731343cff6ee2e5a25c4a091bf8e2a]
   - conda-forge/linux-64::reproc==14.2.4.post0=hd590300_1[md5=82ca53502dfd5a64a80dee76dae14685]
   - conda-forge/linux-64::xz==5.2.6=h166bdaf_0[md5=2161070d867d1b1204ea749c8eec4ef0]
   - conda-forge/linux-64::yaml-cpp==0.8.0=h59595ed_0[md5=965eaacd7c18eb8361fd12bb9e7a57d7]
   - conda-forge/linux-64::libedit==3.1.20191231=he28a2e2_2[md5=4d331e44109e3f0e19b4cb8f9b82f3e1]
   - conda-forge/linux-64::libnghttp2==1.58.0=h47da74e_1[md5=700ac6ea6d53d5510591c4344d5c989a]
   - conda-forge/linux-64::libsolv==0.7.28=hfc55251_2[md5=535bafe1ed0a5bdd3f4c125ca05d378c]
   - conda-forge/linux-64::libsqlite==3.45.2=h2797004_0[md5=866983a220e27a80cb75e85cb30466a1]
   - conda-forge/linux-64::libssh2==1.11.0=h0841786_0[md5=1f5a58e686b13bcfde88b93f547d23fe]
   - conda-forge/linux-64::libxml2==2.12.6=h232c23b_1[md5=6853448e9ca1cfd5f15382afd2a6d123]
   - conda-forge/linux-64::readline==8.2=h8228510_1[md5=47d31b792659ce70f470b5c82fdfb7a4]
   - conda-forge/linux-64::reproc-cpp==14.2.4.post0=h59595ed_1[md5=715e1d720ec1a03715bebd237972fca5]
   - conda-forge/linux-64::tk==8.6.13=noxft_h4845f30_101[md5=d453b98d9c83e71da0741bb0ff4d76bc]
   - conda-forge/linux-64::zstd==1.5.5=hfc55251_0[md5=04b88013080254850d6c01ed54810589]
   - conda-forge/linux-64::krb5==1.21.2=h659d440_0[md5=cd95826dbd331ed1be26bdf401432844]
   - conda-forge/linux-64::libarchive==3.7.2=h2aa1ff5_1[md5=3bf887827d1968275978361a6e405e4f]
   - conda-forge/linux-64::python==3.10.14=hd12c33a_0_cpython[md5=2b4ba962994e8bd4be9ff5b64b75aff2]
   - conda-forge/linux-64::libcurl==8.7.1=hca28451_0[md5=755c7f876815003337d2c61ff5d047e5]
   - conda-forge/linux-64::menuinst==2.0.2=py310hff52083_0[md5=4837faab0d3e665df57fef662148c6a3]
   - conda-forge/noarch::archspec==0.2.3=pyhd8ed1ab_0[md5=192278292e20704f663b9c766909d67b]
   - conda-forge/noarch::boltons==24.0.0=pyhd8ed1ab_0[md5=61de176bd62041f9cd5bd4fcd09eb0ff]
   - conda-forge/linux-64::brotli-python==1.1.0=py310hc6cd4ac_1[md5=1f95722c94f00b69af69a066c7433714]
   - conda-forge/noarch::certifi==2024.2.2=pyhd8ed1ab_0[md5=0876280e409658fc6f9e75d035960333]
   - conda-forge/noarch::charset-normalizer==3.3.2=pyhd8ed1ab_0[md5=7f4a9e3fcff3f6356ae99244a014da6a]
   - conda-forge/noarch::colorama==0.4.6=pyhd8ed1ab_0[md5=3faab06a954c2a04039983f2c4a50d99]
   - conda-forge/noarch::distro==1.9.0=pyhd8ed1ab_0[md5=bbdb409974cd6cb30071b1d978302726]
   - conda-forge/noarch::idna==3.6=pyhd8ed1ab_0[md5=1a76f09108576397c41c0b0c5bd84134]
   - conda-forge/linux-64::jsonpointer==2.4=py310hff52083_3[md5=08ec1463dbc5c806a32fc431874032ca]
   - conda-forge/linux-64::libmamba==1.5.8=had39da4_0[md5=def669885dc103d8acb7ac2ac35e0b2f]
   - conda-forge/noarch::packaging==24.0=pyhd8ed1ab_0[md5=248f521b64ce055e7feae3105e7abeb8]
   - conda-forge/noarch::platformdirs==4.2.0=pyhd8ed1ab_0[md5=a0bc3eec34b0fab84be6b2da94e98e20]
   - conda-forge/noarch::pluggy==1.4.0=pyhd8ed1ab_0[md5=139e9feb65187e916162917bb2484976]
   - conda-forge/linux-64::pycosat==0.6.6=py310h2372a71_0[md5=0adaac9a86d59adae2bc86b3cdef2df1]
   - conda-forge/noarch::pycparser==2.22=pyhd8ed1ab_0[md5=844d9eb3b43095b031874477f7d70088]
   - conda-forge/noarch::pysocks==1.7.1=pyha2e5f31_6[md5=2a7de29fb590ca14b5243c4c812c8025]
   - conda-forge/linux-64::ruamel.yaml.clib==0.2.8=py310h2372a71_0[md5=dcf6d2535586c77b31425ed835610c54]
   - conda-forge/noarch::setuptools==69.5.1=pyhd8ed1ab_0[md5=7462280d81f639363e6e63c81276bd9e]
   - conda-forge/noarch::truststore==0.8.0=pyhd8ed1ab_0[md5=08316d001eca8854392cf2837828ea11]
   - conda-forge/noarch::wheel==0.43.0=pyhd8ed1ab_1[md5=0b5293a157c2b5cd513dd1b03d8d3aae]
   - conda-forge/linux-64::cffi==1.16.0=py310h2fee648_0[md5=45846a970e71ac98fd327da5d40a0a2c]
   - conda-forge/noarch::jsonpatch==1.33=pyhd8ed1ab_0[md5=bfdb7c5c6ad1077c82a69a8642c87aff]
   - conda-forge/linux-64::libmambapy==1.5.8=py310h39ff949_0[md5=37f8aa15b73c4691eeec15caf45aab25]
   - conda-forge/noarch::pip==24.0=pyhd8ed1ab_0[md5=f586ac1e56c8638b64f9c8122a7b8a67]
   - conda-forge/linux-64::ruamel.yaml==0.18.6=py310h2372a71_0[md5=50b7d9b39099cdbabf65bf27df73a793]
   - conda-forge/noarch::tqdm==4.66.2=pyhd8ed1ab_0[md5=2b8dfb969f984497f3f98409a9545776]
   - conda-forge/noarch::urllib3==2.2.1=pyhd8ed1ab_0[md5=08807a87fa7af10754d46f63b368e016]
   - conda-forge/noarch::requests==2.31.0=pyhd8ed1ab_0[md5=a30144e4156cdbb236f99ebb49828f8b]
   - conda-forge/linux-64::zstandard==0.22.0=py310h1275a96_0[md5=54698ba13cd3494547b289cd86a2176a]
   - conda-forge/noarch::conda-package-streaming==0.9.0=pyhd8ed1ab_0[md5=38253361efb303deead3eab39ae9269b]
   - conda-forge/noarch::conda-package-handling==2.2.0=pyh38be061_0[md5=8a3ae7f6318376aa08ea753367bb7dd6]
   - conda-forge/linux-64::conda==24.3.0=py310hff52083_0[md5=4187d17c4b75d8f7757820e835c507c9]
   - conda-forge/noarch::conda-libmamba-solver==24.1.0=pyhd8ed1ab_0[md5=304dc78ad6e52e0fd663df1d484c1531]
   - conda-forge/linux-64::mamba==1.5.8=py310h51d5547_0[md5=3b335eaa4894cbb5379a75f83a4d6b40]


  Package                         Version  Build               Channel         Size
─────────────────────────────────────────────────────────────────────────────────────
  Install:
─────────────────────────────────────────────────────────────────────────────────────

  + _libgcc_mutex                     0.1  conda_forge         conda-forge         
  + ca-certificates              2024.2.2  hbcca054_0          conda-forge         
  + ld_impl_linux-64                 2.40  h41732ed_0          conda-forge         
  + libstdcxx-ng                   13.2.0  h7e041cc_5          conda-forge         
  + pybind11-abi                        4  hd8ed1ab_3          conda-forge         
  + python_abi                       3.10  4_cp310             conda-forge         
  + tzdata                          2024a  h0c530f3_0          conda-forge         
  + libgomp                        13.2.0  h807b86a_5          conda-forge         
  + _openmp_mutex                     4.5  2_gnu               conda-forge         
  + libgcc-ng                      13.2.0  h807b86a_5          conda-forge         
  + bzip2                           1.0.8  hd590300_5          conda-forge         
  + c-ares                         1.28.1  hd590300_0          conda-forge         
  + fmt                            10.2.1  h00ab1b0_0          conda-forge         
  + icu                              73.2  h59595ed_0          conda-forge         
  + keyutils                        1.6.1  h166bdaf_0          conda-forge         
  + libev                            4.33  hd590300_2          conda-forge         
  + libffi                          3.4.2  h7f98852_5          conda-forge         
  + libiconv                         1.17  hd590300_2          conda-forge         
  + libnsl                          2.0.1  hd590300_0          conda-forge         
  + libuuid                        2.38.1  h0b41bf4_0          conda-forge         
  + libxcrypt                      4.4.36  hd590300_1          conda-forge         
  + libzlib                        1.2.13  hd590300_5          conda-forge         
  + lz4-c                           1.9.4  hcb278e6_0          conda-forge         
  + lzo                              2.10  h516909a_1000       conda-forge         
  + ncurses                  6.4.20240210  h59595ed_0          conda-forge         
  + openssl                         3.2.1  hd590300_1          conda-forge         
  + reproc                   14.2.4.post0  hd590300_1          conda-forge         
  + xz                              5.2.6  h166bdaf_0          conda-forge         
  + yaml-cpp                        0.8.0  h59595ed_0          conda-forge         
  + libedit                  3.1.20191231  he28a2e2_2          conda-forge         
  + libnghttp2                     1.58.0  h47da74e_1          conda-forge         
  + libsolv                        0.7.28  hfc55251_2          conda-forge         
  + libsqlite                      3.45.2  h2797004_0          conda-forge         
  + libssh2                        1.11.0  h0841786_0          conda-forge         
  + libxml2                        2.12.6  h232c23b_1          conda-forge         
  + readline                          8.2  h8228510_1          conda-forge         
  + reproc-cpp               14.2.4.post0  h59595ed_1          conda-forge         
  + tk                             8.6.13  noxft_h4845f30_101  conda-forge         
  + zstd                            1.5.5  hfc55251_0          conda-forge         
  + krb5                           1.21.2  h659d440_0          conda-forge         
  + libarchive                      3.7.2  h2aa1ff5_1          conda-forge         
  + python                        3.10.14  hd12c33a_0_cpython  conda-forge         
  + libcurl                         8.7.1  hca28451_0          conda-forge         
  + menuinst                        2.0.2  py310hff52083_0     conda-forge         
  + archspec                        0.2.3  pyhd8ed1ab_0        conda-forge         
  + boltons                        24.0.0  pyhd8ed1ab_0        conda-forge         
  + brotli-python                   1.1.0  py310hc6cd4ac_1     conda-forge         
  + certifi                      2024.2.2  pyhd8ed1ab_0        conda-forge         
  + charset-normalizer              3.3.2  pyhd8ed1ab_0        conda-forge         
  + colorama                        0.4.6  pyhd8ed1ab_0        conda-forge         
  + distro                          1.9.0  pyhd8ed1ab_0        conda-forge         
  + idna                              3.6  pyhd8ed1ab_0        conda-forge         
  + jsonpointer                       2.4  py310hff52083_3     conda-forge         
  + libmamba                        1.5.8  had39da4_0          conda-forge         
  + packaging                        24.0  pyhd8ed1ab_0        conda-forge         
  + platformdirs                    4.2.0  pyhd8ed1ab_0        conda-forge         
  + pluggy                          1.4.0  pyhd8ed1ab_0        conda-forge         
  + pycosat                         0.6.6  py310h2372a71_0     conda-forge         
  + pycparser                        2.22  pyhd8ed1ab_0        conda-forge         
  + pysocks                         1.7.1  pyha2e5f31_6        conda-forge         
  + ruamel.yaml.clib                0.2.8  py310h2372a71_0     conda-forge         
  + setuptools                     69.5.1  pyhd8ed1ab_0        conda-forge         
  + truststore                      0.8.0  pyhd8ed1ab_0        conda-forge         
  + wheel                          0.43.0  pyhd8ed1ab_1        conda-forge         
  + cffi                           1.16.0  py310h2fee648_0     conda-forge         
  + jsonpatch                        1.33  pyhd8ed1ab_0        conda-forge         
  + libmambapy                      1.5.8  py310h39ff949_0     conda-forge         
  + pip                              24.0  pyhd8ed1ab_0        conda-forge         
  + ruamel.yaml                    0.18.6  py310h2372a71_0     conda-forge         
  + tqdm                           4.66.2  pyhd8ed1ab_0        conda-forge         
  + urllib3                         2.2.1  pyhd8ed1ab_0        conda-forge         
  + requests                       2.31.0  pyhd8ed1ab_0        conda-forge         
  + zstandard                      0.22.0  py310h1275a96_0     conda-forge         
  + conda-package-streaming         0.9.0  pyhd8ed1ab_0        conda-forge         
  + conda-package-handling          2.2.0  pyh38be061_0        conda-forge         
  + conda                          24.3.0  py310hff52083_0     conda-forge         
  + conda-libmamba-solver          24.1.0  pyhd8ed1ab_0        conda-forge         
  + mamba                           1.5.8  py310h51d5547_0     conda-forge         

  Summary:

  Install: 78 packages

  Total download: 0 B

─────────────────────────────────────────────────────────────────────────────────────

Transaction starting
Linking _libgcc_mutex-0.1-conda_forge
Linking ca-certificates-2024.2.2-hbcca054_0
Linking ld_impl_linux-64-2.40-h41732ed_0
Linking libstdcxx-ng-13.2.0-h7e041cc_5
Linking pybind11-abi-4-hd8ed1ab_3
Linking python_abi-3.10-4_cp310
Linking tzdata-2024a-h0c530f3_0
Linking libgomp-13.2.0-h807b86a_5
Linking _openmp_mutex-4.5-2_gnu
Linking libgcc-ng-13.2.0-h807b86a_5
Linking bzip2-1.0.8-hd590300_5
Linking c-ares-1.28.1-hd590300_0
Linking fmt-10.2.1-h00ab1b0_0
Linking icu-73.2-h59595ed_0
Linking keyutils-1.6.1-h166bdaf_0
Linking libev-4.33-hd590300_2
Linking libffi-3.4.2-h7f98852_5
Linking libiconv-1.17-hd590300_2
Linking libnsl-2.0.1-hd590300_0
Linking libuuid-2.38.1-h0b41bf4_0
Linking libxcrypt-4.4.36-hd590300_1
Linking libzlib-1.2.13-hd590300_5
Linking lz4-c-1.9.4-hcb278e6_0
Linking lzo-2.10-h516909a_1000
Linking ncurses-6.4.20240210-h59595ed_0
Linking openssl-3.2.1-hd590300_1
Linking reproc-14.2.4.post0-hd590300_1
Linking xz-5.2.6-h166bdaf_0
Linking yaml-cpp-0.8.0-h59595ed_0
Linking libedit-3.1.20191231-he28a2e2_2
Linking libnghttp2-1.58.0-h47da74e_1
Linking libsolv-0.7.28-hfc55251_2
Linking libsqlite-3.45.2-h2797004_0
Linking libssh2-1.11.0-h0841786_0
Linking libxml2-2.12.6-h232c23b_1
Linking readline-8.2-h8228510_1
Linking reproc-cpp-14.2.4.post0-h59595ed_1
Linking tk-8.6.13-noxft_h4845f30_101
Linking zstd-1.5.5-hfc55251_0
Linking krb5-1.21.2-h659d440_0
Linking libarchive-3.7.2-h2aa1ff5_1
Linking python-3.10.14-hd12c33a_0_cpython
Linking libcurl-8.7.1-hca28451_0
Linking menuinst-2.0.2-py310hff52083_0
Linking archspec-0.2.3-pyhd8ed1ab_0
Linking boltons-24.0.0-pyhd8ed1ab_0
Linking brotli-python-1.1.0-py310hc6cd4ac_1
Linking certifi-2024.2.2-pyhd8ed1ab_0
Linking charset-normalizer-3.3.2-pyhd8ed1ab_0
Linking colorama-0.4.6-pyhd8ed1ab_0
Linking distro-1.9.0-pyhd8ed1ab_0
Linking idna-3.6-pyhd8ed1ab_0
Linking jsonpointer-2.4-py310hff52083_3
Linking libmamba-1.5.8-had39da4_0
Linking packaging-24.0-pyhd8ed1ab_0
Linking platformdirs-4.2.0-pyhd8ed1ab_0
Linking pluggy-1.4.0-pyhd8ed1ab_0
Linking pycosat-0.6.6-py310h2372a71_0
Linking pycparser-2.22-pyhd8ed1ab_0
Linking pysocks-1.7.1-pyha2e5f31_6
Linking ruamel.yaml.clib-0.2.8-py310h2372a71_0
Linking setuptools-69.5.1-pyhd8ed1ab_0
Linking truststore-0.8.0-pyhd8ed1ab_0
Linking wheel-0.43.0-pyhd8ed1ab_1
Linking cffi-1.16.0-py310h2fee648_0
Linking jsonpatch-1.33-pyhd8ed1ab_0
Linking libmambapy-1.5.8-py310h39ff949_0
Linking pip-24.0-pyhd8ed1ab_0
Linking ruamel.yaml-0.18.6-py310h2372a71_0
Linking tqdm-4.66.2-pyhd8ed1ab_0
Linking urllib3-2.2.1-pyhd8ed1ab_0
Linking requests-2.31.0-pyhd8ed1ab_0
Linking zstandard-0.22.0-py310h1275a96_0
Linking conda-package-streaming-0.9.0-pyhd8ed1ab_0
Linking conda-package-handling-2.2.0-pyh38be061_0
Linking conda-24.3.0-py310hff52083_0
Linking conda-libmamba-solver-24.1.0-pyhd8ed1ab_0
Linking mamba-1.5.8-py310h51d5547_0

Transaction finished

To activate this environment, use:

    micromamba activate /home/u19/caparicio/miniforge3

Or to execute a single command in this environment, use:

    micromamba run -p /home/u19/caparicio/miniforge3 mycommand

installation finished.
WARNING:
    You currently have a PYTHONPATH environment variable set. This may cause
    unexpected behavior when running the Python interpreter in Miniforge3.
    For best results, please verify that your PYTHONPATH only points to
    directories of packages that are compatible with the Python interpreter
    in Miniforge3: /home/u19/caparicio/miniforge3
Do you wish to update your shell profile to automatically initialize conda?
This will activate conda on startup and change the command prompt when activated.
If you&#39;d prefer that conda&#39;s base environment not be activated on startup,
   run the following command when conda is activated:

conda config --set auto_activate_base false

You can undo this by running `conda init --reverse $SHELL`? [yes|no]
[no] &gt;&gt;&gt; no

You have chosen to not have conda modify your shell scripts at all.
To activate conda&#39;s base environment in your current shell session:

eval &quot;$(/home/u19/caparicio/miniforge3/bin/conda shell.YOUR_SHELL_NAME hook)&quot; 

To install conda&#39;s shell functions for easier access, first activate, then:

conda init

Thank you for installing Miniforge3!
</code></pre></div></li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.path", "navigation.indexes", "navigation.top", "toc.follow", "search.suggest", "search.highlight", "content.code.annotation", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
        <script src="https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js"></script>
      
        <script src="../javascripts/tablesort.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>